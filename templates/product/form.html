{% extends "base.html" %}
{% block title %}Formulario de producto{% endblock %}
{% block content %}
<h1>Ingrese Producto</h1>
{% if form is defined %}

<form method="post" action="">
  {{ form.hidden_tag() }}

  <div class="mb-3">
    {{ form.name.label(class="form-label") }}
    {{ form.name(class="form-control", placeholder="Nombre del producto") }}
    {% for error in form.name.errors %}
      <div class="text-danger small">{{ error }}</div>
    {% endfor %}
  </div>

  <div class="mb-3">
    {{ form.descripcion.label(class="form-label") }}
    {{ form.descripcion(class="form-control", placeholder="Descripci贸n") }}
    {% for error in form.descripcion.errors %}
      <div class="text-danger small">{{ error }}</div>
    {% endfor %}
  </div>

  <div class="mb-3">
    {{ form.precio.label(class="form-label") }}
    {{ form.precio(class="form-control", placeholder="0.00", step="0.01", min="0") }}
    {% for error in form.precio.errors %}
      <div class="text-danger small">{{ error }}</div>
    {% endfor %}
  </div>

  <div class="mb-3">
    {{ form.stock.label(class="form-label") }}
    {{ form.stock(class="form-control", placeholder="Cantidad en stock", min="0") }}
    {% for error in form.stock.errors %}
      <div class="text-danger small">{{ error }}</div>
    {% endfor %}
  </div>

  <div class="d-flex gap-2">
    {{ form.submit(class="btn btn-primary") }}
    <a href="{{ url_for('index') }}" class="btn btn-secondary">Cancelar</a>
  </div>
</form>

{% else %}

<div class="alert alert-warning">No se recibi贸 el formulario. Verifica que la vista pase 'form' al renderizar.</div>
<form method="post" action="">
  <div class="mb-3">
    <label class="form-label" for="name">Producto</label>
    <input id="name" name="name" class="form-control" placeholder="Nombre del producto" required minlength="3" maxlength="50">
  </div>

  <div class="mb-3">
    <label class="form-label" for="descripcion">Descripci贸n</label>
    <input id="descripcion" name="descripcion" class="form-control" placeholder="Descripci贸n">
  </div>

  <div class="mb-3">
    <label class="form-label" for="precio">Precio</label>
    <input id="precio" name="precio" type="number" step="0.01" min="0" class="form-control" placeholder="0.00" required>
  </div>

  <div class="mb-3">
    <label class="form-label" for="stock">Cantidad</label>
    <input id="stock" name="stock" type="number" min="0" class="form-control" placeholder="Cantidad en stock" required>
  </div>

  <div class="d-flex gap-2">
    <button type="submit" class="btn btn-primary">Agregar Producto</button>
    <a href="{{ url_for('index') }}" class="btn btn-secondary">Cancelar</a>
  </div>
</form>

{% endif %}
{% endblock %}
